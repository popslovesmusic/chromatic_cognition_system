 Phase 2: Cognitive Integration (Data Flow)ðŸŽ¯ GoalWire the final deterministic data path, linking the 12-category Chromatic Tokenizer to the 512-dimensional Unified Modality Space (UMS), and implement the round-trip verification logic.Subphase 2.A: Token-to-Category MappingFocus: Implementing the deterministic logic that maps the raw color space and feature data to the fixed 12 categorical indices, utilizing the three separate tensor contexts (Core, Context, Boundary).Define 12-Category Mapping: Implement the final, fixed mapping logic in the appropriate module (e.g., ModalityMapper or a helper) that converts a raw HSL color (specifically the Hue) into one of the 12 Deterministic Indices (0-11). This logic must use the Nearest Neighbor search on the circular manifold (Hue angle) that was specified.Implement Token Feature Extraction: Create a helper function that takes the $3 \times 12 \times 12 \times 3$ tensor and extracts the necessary features (Hue, Saturation, Luminance/Importance) for all 432 processing points, associating each with its deterministic $\mathbf{Z, Y, X}$ coordinate. This helper will feed the UMS encoder.Subphase 2.B: Full UMS EncodingFocus: Completing the primary cognitive data path by implementing the forward UMS projection, utilizing the structural alignment achieved in Phase 1.Implement UMS Encoding Logic: Finalize the encode_to_ums(chromatic_tensor) -> UMSVector function (or equivalent) by implementing the logic specified in the UMS Integration sheet:3-Block Projection: Deterministically project the HSL block, the $\mathbf{2049 \rightarrow 256}$ Spectral Block means, and the Affective/Temporal block ($\mu$ seeded) into the raw 512 vector.Apply Chronicle Normalization: Apply the final, deterministic $\mathbf{\text{UMS}(x) = (x - \mu) / \sigma}$ normalization using the Chronicle's $\mu$ and $\sigma$ arrays to produce the final UMS vector.Subphase 2.C: UMS Decoding and ReversibilityFocus: Implementing the inverse path and the critical round-trip integrity check to validate the entire cognitive loop.Implement UMS Decoding Logic: Implement the decode_from_ums(ums_vector) -> HSL function by reversing the normalization and extracting the core HSL features (Hue, Saturation, Luminance).Implement Reversibility Test: Create a new unit test that performs a full round-trip: $\text{Categorical Index} \rightarrow \text{UMS Vector} \rightarrow \text{Decoded HSL}$. The test must use the $\mathbf{\Delta \text{E}_{94}}$ metric to assert that the color error is less than the $\mathbf{1.0 \times 10^{-3}}$ tolerance.Implement Consensus Check: Integrate the logic that performs the final Index Consensus Check (comparing the decoded Hue's nearest category to the Spectral Correlation's best category) to ensure structural integrity across modalities